"use strict";

const app = {
  pathToLibsFiles: './assets/libs'
};
window.app = app; // polyfills
// before polyfills

(function (arr) {
  arr.forEach(item => {
    if (item.hasOwnProperty('before')) {
      return;
    }

    Object.defineProperty(item, 'before', {
      configurable: true,
      enumerable: true,
      writable: true,
      value: function before() {
        // eslint-disable-next-line prefer-rest-params
        const argArr = Array.prototype.slice.call(arguments);
        const docFrag = document.createDocumentFragment();
        argArr.forEach(argItem => {
          const isNode = argItem instanceof Node;
          docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));
        });
        this.parentNode.insertBefore(docFrag, this);
      }
    });
  });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]); // forEach polyfill


if (window.NodeList && !NodeList.prototype.forEach) {
  NodeList.prototype.forEach = function (callback, thisArg) {
    // eslint-disable-next-line no-param-reassign
    thisArg = thisArg || window;

    for (let i = 0; i < this.length; i++) {
      callback.call(thisArg, this[i], i, this);
    }
  };
}

const activateSliders = () => {
  const utilituSlider = new Swiper('.utility-slider', {
    slidesPerView: 2.5,
    slidesPerGroup: 1,
    spaceBetween: 20,
    speed: 800,
    navigation: {
      nextEl: '.slider__arrow--next',
      prevEl: '.slider__arrow--prev'
    },
    breakpoints: {
      320: {
        slidesPerView: 1,
        spaceBetween: 10
      },
      700: {
        slidesPerView: 2.5
      },
      1050: {
        slidesPerView: 2.5
      }
    }
  });
  const employeeSlider = new Swiper('.employee-slider', {
    slidesPerView: 3.3,
    slidesPerGroup: 1,
    spaceBetween: 20,
    speed: 800,
    navigation: {
      nextEl: '.slider2__arrow--next',
      prevEl: '.slider2__arrow--prev'
    },
    breakpoints: {
      320: {
        slidesPerView: 1
      },
      520: {
        slidesPerView: 2.3
      },
      1050: {
        slidesPerView: 3.3
      }
    }
  });
  const convenienceSlider = new Swiper('.convenience-slider', {
    slidesPerView: 1,
    slidesPerGroup: 1,
    navigation: {
      nextEl: '.slider3__arrow--next',
      prevEl: '.slider3__arrow--prev'
    },
    pagination: {
      el: '.swiper-pagination',
      type: 'bullets',
      clickable: true
    },
    breakpoints: {
      1050: {
        slidesPerView: 1
      }
    }
  });
};

const scrollTo = () => {
  document.body.addEventListener('click', e => {
    if (e.target.closest('a[href^="#"]')) {
      e.preventDefault();
      const target = e.target.closest('a[href^="#"]').getAttribute('href');
      document.querySelector(target).scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
};

activateSliders();
scrollTo();
app.addLibs = {
  name: 'addLibs',
  description: 'connect the script library dynamically',

  addScriptFile(nameFile, callback) {
    const body = document.getElementsByTagName('body')[0];
    const script = document.createElement('script');

    script.onload = () => callback && callback();

    script.src = `${app.pathToLibsFiles}/js/${nameFile}.js`;
    body.appendChild(script);
  },

  addStyleFile(nameFile) {
    const appCss = document.getElementById('app-css');
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = `${app.pathToLibsFiles}/css/${nameFile}.css`;
    appCss.before(link);
  },

  initScript(nameFile, nameLib, callback) {
    let hasLibs = null;
    const scripts = document.querySelectorAll('script');
    scripts.forEach(el => {
      const str = el.getAttribute('src');

      if (str) {
        if (str.indexOf(nameFile) >= 0) {
          hasLibs = true;
        }
      }
    });

    if (!hasLibs) {
      this.addScriptFile(nameFile, callback);
    } else {
      const timerId = setInterval(() => {
        if (window[nameLib] || window.jQuery && jQuery()[nameLib]) {
          callback();
          clearInterval(timerId);
        }
      }, 1);
    }
  },

  initStyle(nameFile) {
    let hasLibs = null;
    const link = document.querySelectorAll('link');
    link.forEach(el => {
      const str = el.getAttribute('src');

      if (str) {
        if (str.indexOf(nameFile) >= 0) {
          hasLibs = true;
        }
      }
    });

    if (!hasLibs) {
      this.addStyleFile(nameFile);
    }
  }

}; // app.yourScriptName.init();
//# sourceMappingURL=app.min.js.map
